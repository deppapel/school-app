<h2>Results</h2>

<table border="1" style="border-collapse: collapse; width: 100%;">
    <tr>
        <th>Adm No</th>
        <th>Name</th>

        {% for subject in subjects %}
            <th>{{ subject.subject_name }}</th>
        {% endfor %}

        <th>Total Points</th>
        <th>Grade</th>
    </tr>

    {% for student in students %}
    <tr>
        <td>{{ student.adm_no }}</td>
        <td>{{ student.first_name }} {{ student.second_name }}</td>

        {% set total_points = 0 %}

        {% for subject in subjects %}
            <td>
                {% set mark = "" %}
                {% for r in student.results %}
                    {% if r.subject_id == subject.id %}
                        {% set mark = r.marks %}
                        {% set total_points = total_points + r.points %}
                    {% endif %}
                {% endfor %}
                {{ mark }}
            </td>
        {% endfor %}

        <td><strong>{{ total_points }}</strong></td>
        <td>
            {% if total_points >= 84 %}A
            {% elif total_points >= 72 %}B
            {% elif total_points >= 60 %}C
            {% elif total_points >= 48 %}D
            {% else %}E
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>









